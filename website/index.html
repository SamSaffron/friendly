<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <link rel="stylesheet" href="styles/screen.css" type="text/css" media="screen, projection" />
    <link rel="stylesheet" href="styles/print.css" type="text/css" media="print" />
    <!--[if lt IE 8]><link rel="stylesheet" href="/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]-->

    <script type="text/javascript" src="scripts/shCore.js"></script>
  	<script type="text/javascript" src="scripts/shBrushRuby.js"></script>
  	<script type="text/javascript" src="scripts/shBrushBash.js"></script>
  	<link type="text/css" rel="stylesheet" href="styles/shCore.css"/>
  	<link type="text/css" rel="stylesheet" href="styles/shThemeDefault.css"/>
  	<script type="text/javascript">
  		SyntaxHighlighter.config.clipboardSwf = 'scripts/clipboard.swf';
  		SyntaxHighlighter.all();
  	</script>

    <link rel="stylesheet" href="styles/friendly.css" type="text/css" media="screen, projection" />

  </head>
  <body>
   <div class="container">
      
       
    <h1>Friendly &nbsp;<span>NoSQL with MySQL</span></h1>
    <hr/>
	  <dl>
	    <dt>Store schemaless data in MySQL.</dt>
	    <dd>Evolve your data model without feeling the pain of migrations.</dd>
	    
	    <dt>Build indexes offline</dt>
	    <dd>Building an index can take hours with a lot of data. Stay agile without taking your app offline.</dd>
	    
	    <dt>Write-through and read-through caching baked right in.</dt>
	    <dd><a href="http://radar.oreilly.com/2009/10/watching-websites.html">Fast websites make more money.</a> The 99.8% cache hit rate we see in production is a one-liner with Friendly.</dd>
	    
	    <dt>Compatible with will_paginate.</dt>
	    <dd>No need to change your view code.</dd>
	  </dl>
      <hr />
      <div class="span-24" id="links">
      	<div class="span-2 loud">Links:</div>
      	<div class="span-22 last">
      	  <ul>
      	    <li><a href="http://github.com/giraffesoft/friendly">Github</a></li>
      	    <li><a href="http://rdoc.info/giraffesoft/friendly">RDoc.info</a></li>
      	    <li><a href="http://jamesgolick.com/etc">Release Announcement</a></li>
      	  </ul>
      	</div>
      </div>
      <hr />
      <h2>Friendly in 5 minutes</h2>
      <h3>Install friendly</h3>
      <div class="nolinenumbers">
	<pre class="brush: bash;">sudo gem install friendly</pre>
      </div>

      <h3>Setup gem dependency in Rails</h3>
      <h4>Rails</h4>
      <p class="bottom">In environment.rb:</p>
      <pre class="brush: ruby;">config.gem "friendly"</pre>

    
      <p class="bottom">Create a config/friendly.yml:</p>
      <pre class="brush: ruby;">
	development:
	  :adapter:  "mysql"
	  :host:     "localhost"
	  :user:     "root"
	  :password: "swordfish"
	  :database: "friendly_development"
      </pre>
	   
      <h4>Not Rails</h4>
      <pre class="brush: ruby;">
	Friendly.configure :adapter  => "mysql",
				       :host     => "localhost",
				       :user     => "root",
				       :password => "swordfish",
				       :database => "playing_with_friendly"
      </pre>

      <h3>Create a Model</h3>
      <pre class="brush: ruby;">
	class BlogPost
	  include Friendly::Document
	  
	  attribute :author, String
	  attribute :title,  String
	  attribute :body,   String
	end
      </pre>


      <h3>Create Tables</h3>
      <p class="bottom">From irb or script/console:</p>
      <pre class="brush: ruby;">Friendly.create_tables!</pre>

    
      <h3>Index</h3>
      <p class="bottom">Just add the indexes you want to your model.</p>
      <pre class="brush: ruby; highlight: [8,9];">
	class BlogPost
	  include Friendly::Document
	  
	  attribute :author, String
	  attribute :title,  String
	  attribute :body,   String
	  
	  indexes :author
	  indexes :created_at
	end      
      </pre>

      <p class="bottom">Run create_tables again and the index tables will be created for you.</p>
      <pre class="brush: ruby;">Friendly.create_tables!</pre>

      <h3>Create Objects</h3>
      <p class="bottom">With familiar ActiveRecord syntax:</p>
      <pre class="brush: ruby;">
	BlogPost.create :author => "James Golick",
				    :title  => "Friendly has familiar syntax.",
				    :body   => "So, there's very little learning curve."
     </pre>


      <h3>Query</h3>
      <p class="bottom">All posts by James Golick:</p>
      <pre class="brush: ruby;">BlogPost.all(:author => "James Golick")</pre>

      <p class="bottom">Most recent posts:</p>
      <pre class="brush: ruby;">BlogPost.all(:order! => :created_at.desc)</pre>


      <h3>Cache</h3>
      <p class="bottom">Install the memcached gem:</p>
      <pre class="brush: ruby;">sudo gem install memcached</pre>

      <p class="bottom">Configure Friendly to cache:</p>
      <pre class="brush: ruby;">Friendly.cache = Friendly::Memcached.new(Memcached.new)</pre>

      <p class="bottom">Configure your model to cache:</p>
      <pre class="brush: ruby; highlight: [11];">
	class BlogPost
	  include Friendly::Document
	  
	  attribute :author, String
	  attribute :title,  String
	  attribute :body,   String
	  
	  indexes :author
	  indexes :created_at
	  
	  caches_by :id
	end
      </pre>
    </div>
  </body>
</html>
